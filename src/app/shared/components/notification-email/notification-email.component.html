<ion-grid padding-top>
  <ion-row>
    <ion-col size="2"></ion-col>
    <ion-col size="8">
      <ion-row class="group-buttons">
        <ion-col size="12" text-center>
          <h2>Templates for Approved Members</h2>
        </ion-col>
        <ion-col size="12" text-center>
          <ion-button (click)="buildEmailType('sendGeneralEmail')">General Email</ion-button>
          <ion-button (click)="buildEmailType('sendEventEmail')">Events Email</ion-button>
          <ion-button (click)="buildEmailType('sendSecurityEmail')">Security Email</ion-button>
          <ion-button (click)="buildEmailType('sendFilmingEmail')">Filming Email</ion-button>
        </ion-col>
      </ion-row>
      <ion-row class="group-buttons">
        <ion-col size="12" text-center>
          <h2>Templates for All Residents</h2>
        </ion-col>
        <ion-col size="12" text-center>
          <ion-button (click)="buildEmailType('sendAllResidentsEmail')">General Email</ion-button>
        </ion-col>
      </ion-row>
      <ion-header *ngIf="emailType == 'sendGeneralEmail'" text-center padding>
        <h1>
          Your General Message to All Approved Members
        </h1>
        <ion-img src="/assets/SF-general-banner.png"></ion-img>
      </ion-header>
      <ion-header *ngIf="emailType == 'sendEventEmail'" text-center padding>
        <h1>
          Your Events Message to All Approved Members
        </h1>
        <ion-img src="/assets/SF-events-banner.png"></ion-img>
      </ion-header>
      <ion-header *ngIf="emailType == 'sendSecurityEmail'" text-center padding>
        <h1>
          Your Security Message to All Approved Members
        </h1>
        <ion-img src="/assets/SF-security-banner.png"></ion-img>
      </ion-header>
      <ion-header *ngIf="emailType == 'sendFilmingEmail'" text-center padding>
        <h1>
          Your Filming Message to All Approved Members
        </h1>
        <ion-img src="/assets/SF-filming-banner.jpg"></ion-img>
      </ion-header>
      <ion-header *ngIf="emailType == 'sendAllResidentsEmail'" text-center padding>
        <h1>
          Your Message to All Sherwood Forest Residents
        </h1>
        <ion-img src="/assets/SF-allresidents-banner.jpg"></ion-img>
      </ion-header>
      <form *ngIf="emailType != ''" [formGroup]="emailForm" (ngSubmit)="onSubmitForm(emailType)">
        <ion-item>
          <ion-label><b>Email Subject</b></ion-label>
          <ion-input placeholder="Insert text here..."
                  type="text" formControlName="subject"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label><b>Message to Members</b></ion-label>
        </ion-item>
        <div *ngIf="percentage | async as pct">
          <progress [value]="pct" max="100"></progress>
          {{ pct | number }}%   
        </div>
        <ion-item *ngIf="snapshot | async as snap">
          {{ snap.bytesTransferred }} of {{ snap.totalBytes }}
          <button (click)="task.pause()" [disabled]="!isActive(snap)">Pause</button>
          <button (click)="task.cancel()" [disabled]="!isActive(snap)">Cancel</button>
          <button (click)="task.resume()" [disabled]="!(snap?.state === 'paused')">Resume</button>
        </ion-item>
        <ion-item *ngIf="downloadURL as url">
          <ion-row>
            <ion-col size="12">
              <h2>Please Click the Confirm Button Below to Add Image to Your Notification Email</h2>
            </ion-col>
            <ion-col size="12">
              <img [src]="url">
            </ion-col>
            <ion-col size="12">
              <ion-button expand="block" (click)="getPhotoURL()">Confirm</ion-button>
            </ion-col>
          </ion-row>
        </ion-item>
        <ion-item>
          <div class="invisible-input-cont">
            <input #quillFile type="file" (change)="quillFileSelected($event)">
          </div>
          <quill-editor
                  (onEditorCreated)="getEditorInstance($event)"
                  class="ql-editor" [styles]="editorStyle" [modules]="editorConfig"
                  formControlName="emailmessage">
          </quill-editor>
        </ion-item>
        <ion-row>
          <ion-col text-center>
            <ion-button type="submit" [disabled]="!emailForm.valid" >
              Submit
            </ion-button>
          </ion-col>
        </ion-row>
      </form>
    </ion-col>
    <ion-col size="2"></ion-col>
  </ion-row>
</ion-grid>
